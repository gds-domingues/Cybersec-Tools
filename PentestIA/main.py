import argparse
from pentest_crew import setup_crew 

def main(target_ip: str):
    """
    Main function to start the pentesting process.

    Args:
        target_ip (str): The target IP address for pentesting.
    """
    crew = setup_crew()
    crew.kickoff(inputs={'target_ip': target_ip})
    print("Pentesting process completed.")

if __name__ == "__main__":
    # Setup argument parsing to capture the target IP from the command line
    parser = argparse.ArgumentParser(description="Run the pentester crew with a specified target IP.")
    parser.add_argument("-ip", "--target_ip", required=True, help="Specify the target IP address for pentesting.")
    
    # Parse arguments
    args = parser.parse_args()
    
    # Run the main function with the provided IP address
    main(args.target_ip)
