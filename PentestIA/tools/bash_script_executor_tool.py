# tools/bash_script_executor_tool.py

from crewai_tools import tool
import subprocess

@tool
def bash_script_executor(target_ip: str) -> str:
    """
    Executes the 'nmap -A <target_ip>' command on Windows and returns the output.

    Args:
        target_ip (str): The IP address to scan.

    Returns:
        str: The output from the 'nmap' command.
    """
    command = f"nmap -A {target_ip}"
    
    try:
        result = subprocess.run(command, shell=True, capture_output=True, text=True)
        return result.stdout if result.returncode == 0 else f"Error: {result.stderr}"
    except Exception as e:
        return f"Execution failed: {str(e)}"
